!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.kelbas={})}(this,function(e){"use strict";const t=()=>Math.random().toString(36).slice(2).padStart(10,"0");String.prototype.html=function(){return(new DOMParser).parseFromString(this,"text/html").body.firstChild},String.prototype.svg=function(){return(new DOMParser).parseFromString(this,"image/svg+xml").documentElement};class n{constructor(e,...t){this.values_map=[],this.string=this.concat_string(e,t)}concat_string(e,n){return e.map((e,r)=>{const o=n[r],a=t();switch(!0){case"function"==typeof o:e=e.concat(`" data-${a}="`),this.values_map.push({id:a,value:o});break;case"object"==typeof o||o&&1===o.nodeType:e=`${e} <template data-${a}=""></template>`,this.values_map.push({id:a,value:o});break;case"string"==typeof o:e=`${e}${o||""}`}return e}).reduce((e,t)=>e+t)}get fragment(){const e=document.createElement("template");return e.innerHTML=this.string,this.place_values(e.content.cloneNode(!0))}get container(){return this.place_values(this.string.html())}get svg(){const e=this.container;return e.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.place_values(e.outerHTML.svg())}place_values(e){return this.values_map.forEach(t=>{const n=e.outerHTML?e.parentNode.querySelector(`[data-${t.id}]`):e.querySelector(`[data-${t.id}]`);if(!n)throw new Error('Warning function must be defined between parentheses for example "${calledFunction}"');if("function"==typeof t.value){const e=/(on)\w+/g.exec(n.outerHTML)[0].split("on")[1];n.addEventListener(e,t.value.bind(this)),n.removeAttribute(`on${e}`),n.removeAttribute(`data-${t.id}`)}else if("object"==typeof t.value)if(t.value.children)n.replaceWith(t.value);else{const e=document.createDocumentFragment();e.append(...t.value),n.replaceWith(e)}}),e}}function r(e,...t){return new n(e,...t).container}function o(e,...t){return new n(e,...t).fragment}function a(e,...t){return new n(e,...t).svg}window.HTML=r,window.SVG=a,window.FRAGMENT=o,e.HTML=r,e.FRAGMENT=o,e.SVG=a,Object.defineProperty(e,"__esModule",{value:!0})});
