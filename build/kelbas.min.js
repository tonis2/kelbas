!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.kelbas=t()}(this,function(){"use strict";const e=()=>{let e=()=>(65536*(1+Math.random())|0).toString(16).substring(1);return"p"+(e()+e())+"-"+e()};class t{constructor(e,...t){this.values_map=[],this.string=this.concat_string(e,t)}concat_string(t,n){return t.map((t,r)=>{const s=n[r],o=e();switch(!0){case"function"==typeof s:t=t.concat(`"${o} `),this.values_map.push({id:o,value:s});break;case"object"==typeof s||s&&1===s.nodeType:t=`${t} <template ${o}></template>`,this.values_map.push({id:o,value:s});break;case"string"==typeof s:t=`${t}${s||""}`}return t}).reduce((e,t)=>e+t)}get fragment(){const e=document.createElement("template");return e.innerHTML=this.string,this.place_values(e.content.cloneNode(!0))}get container(){let e=(new DOMParser).parseFromString(this.string,"text/html");return this.place_values(e.body.firstChild)}get svg(){let e=new DOMParser;const t=this.container;t.setAttribute("xmlns","http://www.w3.org/2000/svg");let n=e.parseFromString(t.outerHTML,"image/svg+xml");return this.place_values(n.documentElement)}place_values(e){return this.values_map.forEach(t=>{const n=e.outerHTML?e.parentNode.querySelector(`[${t.id}]`):e.querySelector(`[${t.id}]`);if("function"==typeof t.value){const e=/(on)\w+/g.exec(n.outerHTML)[0].split("on")[1];n.addEventListener(e,t.value.bind(this)),n.removeAttribute(`on${e}`)}else if("object"==typeof t.value)if(t.value.children)n.replaceWith(t.value);else{const e=document.createDocumentFragment();t.value.forEach(t=>e.appendChild(t)),n.replaceWith(e)}}),e}}function n(e,...n){return new t(e,...n)}return window.HTML=n,n});
